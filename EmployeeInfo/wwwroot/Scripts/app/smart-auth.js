var l;$(function(){'use strict';if(window.location.href.indexOf('#_=_')>0){window.location=window.location.href.replace(/#.*/,'');}
$('.smart-auth-btn').magnificPopup({type:'inline',closeOnBgClick:true,midClick:true,closeMarkup:'<button title="Close (Esc)" type="button" class="mfp-close"></button>'});$('input[Type=Password]').hidePassword('focus',{toggle:{className:'my-toggle'}});});jQuery('.regi-form').submit(function(event){event.preventDefault();var frm=$('.regi-form');if(frm.valid()){jQuery('#regi-error-box').hide();var iagree=$("#i-agree").prop("checked");if(iagree==false){AlertError("Please check the I acknowledge and accept check box!");return;}
l=Ladda.create(document.getElementById("regi-btn"));l.start();var jsonData=PrepearJasonFormData('regi-form');var token=jsonData["__RequestVerificationToken"];jsonData["__RequestVerificationToken"]="";var data="{'model':"+JSON.stringify(jsonData)+"}";$('.disabled-item').attr("disabled","disabled");jQuery.ajax({type:'POST',contentType:"application/json; charset=utf-8",url:'/member/SaveRegisterForm',dataType:'json',data:data,headers:{"__RequestVerificationToken":token},success:function(data){l.stop();if(data.Result){$("#rv-code-success-box").html(data.Txt).show();jQuery('#customer-regi').hide();jQuery('#regi-verification-box').show();var u=window.location.pathname;$("#rv-code-url").val(u);$("#rv-code-action").val("1");$("#rv-code-username").val(data.Username);if(data.IsMobile){$("#rv-code-cc option[value="+data.CountryCode+"]").prop("selected",true);ResetToMobile($("#rv-code-username"))}
StartOTPTimer(parseInt(data.Min),"rv-sa-code-timer","rv-sa-send-code");$("#rv-sa-code-timer").show();$("#rv-sa-send-code").prop("disabled",true);}else{AlertError(data.Message);}
$('.disabled-item').attr("disabled",false);},error:function(e){l.stop();$('.disabled-item').attr("disabled",false);}});}});jQuery('.login-form').submit(function(event){event.preventDefault();var u=window.location.pathname;$("#login-url").val(u);var frm=$('.login-form');if(frm.valid()){jQuery('#login-error-box').hide();var btn=frm.attr("data-btn");l=Ladda.create(document.getElementById("login-btn"));l.start();var jsonData=PrepearJasonFormData("login-form");var token=jsonData["__RequestVerificationToken"];jsonData["__RequestVerificationToken"]="";var data="{'model':"+JSON.stringify(jsonData)+"}";$('.disabled-item').attr("disabled","disabled");jQuery.ajax({type:'POST',contentType:"application/json; charset=utf-8",url:'/Member/Login',headers:{"__RequestVerificationToken":token},dataType:'json',data:data,success:function(data){l.stop();if(data.Result){jQuery('.login-boxes').hide();jQuery('#login-success-box').html(data.Message).show();window.location.href='/user/dashboard';}else{jQuery('#login-error-box').html(data.Message).show();$('.disabled-item').attr("disabled",false);}},error:function(e){l.stop();$('.disabled-item').attr("disabled",false);}});}});jQuery('.forgot-form').submit(function(event){if(jQuery(this).valid()){event.preventDefault();l=Ladda.create(document.getElementById("forgot-btn"));l.start();var jsonData=PrepearJasonFormData("forgot-form");var data="{'model':"+JSON.stringify(jsonData)+"}";var token=jsonData["__RequestVerificationToken"];jsonData["__RequestVerificationToken"]="";jQuery('#forgot-error-box').hide();jQuery.ajax({type:'POST',contentType:"application/json; charset=utf-8",url:'/Member/ForgotPassword',dataType:'json',data:data,headers:{"__RequestVerificationToken":token},success:function(data){l.stop();if(data.Result){jQuery('#forgot-box').hide();$("#sm-header").html("Account Verification");$("#code-success-box").html(data.Txt).show();jQuery('#pass-verification-box').show();var u=window.location.pathname;$("#code-url").val(u);$("#code-action").val("2");$("#code-username").val(data.Username);if(data.IsMobile){$("#code-cc option[value="+data.CountryCode+"]").prop("selected",true);ResetToMobile($("#code-username"))}
StartOTPTimer(parseInt(data.Min),"sa-code-timer","sa-send-code");$("#sa-code-timer").show();$("#sa-send-code").prop("disabled",true);}else{jQuery('#forgot-error-box').html(data.Message).show();}},error:function(e){l.stop}});}});jQuery('.verify-form').submit(function(event){if(jQuery(this).valid()){event.preventDefault();l=Ladda.create(document.getElementById("verify-btn"));l.start();var jsonData=PrepearJasonFormData("verify-form");var data="{'model':"+JSON.stringify(jsonData)+"}";var token=jsonData["__RequestVerificationToken"];jsonData["__RequestVerificationToken"]="";$("#code-error-box").html("").hide();$("#code-success-box").html("").hide();jQuery.ajax({type:'POST',contentType:"application/json; charset=utf-8",url:'/Member/VerifyCode',dataType:'json',data:data,headers:{"__RequestVerificationToken":token},success:function(data){l.stop();if(data.Result){jQuery('#code-success-box').html(data.Message).show();jQuery('.verify-form').hide();window.location.reload();}else{jQuery('#code-error-box').html(data.Message).show();}},error:function(e){l.stop}});}});jQuery('.social-join').on("click",function(event){event.preventDefault();l=Ladda.create(this);l.start();$('.disabled-item').prop("disabled",true);var p=$(this).attr("data-id");var u='/user/dashboard';$(".ext-login-provider").val(p);$(".ext-login-url").val(u);var frm=$("#ext-login");frm.submit();});jQuery('.password-options a').on("click",function(event){event.preventDefault();$('.password-options a').removeClass('active');$(this).addClass('active');$("#password-type").val($(this).attr("data-id"));$("#sm-password").attr("placeholder",$(this).attr("data-title"));if($(this).attr("data-id")=="1"){$("#opt-option-box").show();}else{$("#opt-option-box").hide();}});jQuery('#sa-send-code').on("click",function(event){event.preventDefault();var un=$("#code-username").val();var cc=$("#code-cc").val();var act=$("#code-action").val();if(un==""||un==null){AlertError("Please enter email address or mobile number");return;}
var form=$('#verify-form');var token=$('input[name="__RequestVerificationToken"]',form).val();var l=Ladda.create(this);l.start();$("#code-error-box").html("").hide();$("#code-success-box").html("").hide();jQuery.ajax({type:'POST',url:'/member/SendCode',dataType:'json',data:{"cc":cc,"un":un,"act":act,"__RequestVerificationToken":token},success:function(data){l.stop();if(data.Result){$("#code-success-box").html(data.Message).show();StartOTPTimer(parseInt(data.Min),"sa-code-timer","sa-send-code");$("#sa-code-timer").show();$("#sa-send-code").prop("disabled",true);}else{$("#code-error-box").html(data.Message).show();}},error:function(e){l.stop();}});});jQuery('.sm-form-link').on("click",function(event){event.preventDefault();$('.auth-forms').hide();$($(this).attr("href")).show();$("#sm-header").html($(this).attr("data-title"));});jQuery('.login-preference').on("click",function(event){var id=$(this).attr("data-id");var title=$(this).attr("data-title");var v=$(this).val();var lbl=$("#"+id).parent("div").prev("label");lbl.html(title).attr("placeholder","Your "+title);var inp=$("#"+id);inp.attr("placeholder",title);if(v=="2"){ResetToMobile(inp)}else{ResetToEmail(inp)}});jQuery("body").on("change keyup",".sa-username",function(e){var txt=$(this).val();if(txt.length<=3&&(e.which==8||e.which==46)){ResetToEmail($(this))}
else if(txt.length>=4){if(!isNaN(txt)){ResetToMobile($(this))}}});jQuery("body").on("paste",".sa-username",function(e){var txt=e.originalEvent.clipboardData.getData('text');if(txt.length>=4){if(!isNaN(txt)){ResetToMobile($(this))}}});function ResetToMobile(t){t.parent("div").addClass("input-group").addClass("combo-inputs");if(t.attr("data-type")!="form"){t.css("paddingLeft","10px");}
t.prev("div").show();t.next("i").hide();}
function ResetToEmail(t){t.parent("div").removeClass("combo-inputs").removeClass("input-group");if(t.attr("data-type")!="form"){t.css("paddingLeft","40px");}
t.prev("div").hide();t.next("i").show();}
function ResetForm(cls){jQuery('#'+cls+'-error-box').html("").hide();jQuery('#'+cls+'-success-box').html("").hide();jQuery('#'+cls+'-close-box').hide();jQuery('.'+cls+'-boxes').show();EmptyFormData(cls+'-form');$('.input-validation-error').addClass('input-validation-valid');$('.input-validation-error').removeClass('input-validation-error');$('.field-validation-error').addClass('field-validation-valid');$('.field-validation-error').removeClass('field-validation-error');}
jQuery('.ga-join-btn').on("click",function(event){event.preventDefault();l=Ladda.create(this);l.start();$('.disabled-item').attr("disabled","disabled");$("#google-join-btn").click();});function JoinWithGoogle(token,id,email,fname,lname,image){var form=$('#ext-login');var tk=$('input[name="__RequestVerificationToken"]',form).val();var url="";jQuery.ajax({type:'POST',url:'/Member/JoinWithGoogle',dataType:'json',data:{"token":token,"id":id,"email":email,"fname":fname,"lname":lname,"image":image,"url":url},headers:{"__RequestVerificationToken":tk},success:function(data){if(data.Result){jQuery('#login-success-box').html(data.Message).show();window.location.reload();}else{jQuery("#login-error-box").html(data.Message).show();l.stop();$('.disabled-item').attr("disabled",false);}},error:function(e){l.stop();$('.disabled-item').attr("disabled",false);}});}